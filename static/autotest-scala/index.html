<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Autotest GUI với Scala</title>
    <meta name="description" content="">

    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="../favicon.ico">

    <link rel="stylesheet" type="text/css" href="../assets/css/screen.css?v=572f9728d4">
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic%7COpen+Sans:700,400">
    <link rel="stylesheet" type="text/css" href="../assets/css/prism.css?v=572f9728d4">
    <script type="text/javascript" src="../assets/js/prism.js?v=572f9728d4"></script>

    <link rel="canonical" href="index.html">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <link rel="amphtml" href="amp/index.html">
    
    <meta property="og:site_name" content="Learn Java">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Autotest GUI với Scala">
    <meta property="og:description" content="Scala không phải là một ngôn ngữ mới nhưng vẫn còn khá lạ lẫm với các developer , đặc biệt là việc áp dụng Scala trong viết test. Ngày càng có nhiều dự án sử dụng Scala cho mục đích test GUI, vì vậy bài viết sẽ giới thiệu một sự">
    <meta property="og:url" content="http://localhost:2368/autotest-scala/">
    <meta property="article:published_time" content="2016-10-30T15:00:38.000Z">
    <meta property="article:modified_time" content="2016-10-30T15:01:04.000Z">
    <meta property="article:tag" content="test">
    <meta property="article:tag" content="scala">
    
    <meta property="article:author" content="https://www.facebook.com/nguyenngoc101">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Autotest GUI với Scala">
    <meta name="twitter:description" content="Scala không phải là một ngôn ngữ mới nhưng vẫn còn khá lạ lẫm với các developer , đặc biệt là việc áp dụng Scala trong viết test. Ngày càng có nhiều dự án sử dụng Scala cho mục đích test GUI, vì vậy bài viết sẽ giới thiệu một sự">
    <meta name="twitter:url" content="http://localhost:2368/autotest-scala/">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="ngocnv">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="test, scala">
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Learn Java",
        "logo": "http://localhost:2368/ghost/img/ghosticon.jpg"
    },
    "author": {
        "@type": "Person",
        "name": "ngocnv",
        "url": "http://localhost:2368/author/ngocnv/",
        "sameAs": [
            "https://www.facebook.com/nguyenngoc101"
        ],
        "description": "I&#x27;m just a java lover"
    },
    "headline": "Autotest GUI với Scala",
    "url": "http://localhost:2368/autotest-scala/",
    "datePublished": "2016-10-30T15:00:38.000Z",
    "dateModified": "2016-10-30T15:01:04.000Z",
    "keywords": "test, scala",
    "description": "Scala không phải là một ngôn ngữ mới nhưng vẫn còn khá lạ lẫm với các developer , đặc biệt là việc áp dụng Scala trong viết test. Ngày càng có nhiều dự án sử dụng Scala cho mục đích test GUI, vì vậy bài viết sẽ giới thiệu một sự",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://localhost:2368"
    }
}
    </script>

    <meta name="generator" content="Ghost 0.11">
    <link rel="alternate" type="application/rss+xml" title="Learn Java" href="../rss/index.html">
</head>
<body class="post-template tag-test tag-scala nav-closed">

    <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="index.html#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
            <li class="nav-home" role="presentation"><a href="../">Home</a></li>
            <li class="nav-java-core" role="presentation"><a href="../tag/java/">Java Core</a></li>
            <li class="nav-spring-framework" role="presentation"><a href="../tag/spring/">Spring Framework</a></li>
    </ul>
        <a class="subscribe-button icon-feed" href="../rss/index.rss">Subscribe</a>
</div>
<span class="nav-cover"></span>


    <div class="site-wrapper">

        


<header class="main-header post-head no-cover">
    <nav class="main-nav  clearfix">
        
            <a class="menu-button icon-menu" href="index.html#"><span class="word">Menu</span></a>
    </nav>
</header>

<main class="content" role="main">
    <article class="post tag-test tag-scala">

        <header class="post-header">
            <h1 class="post-title">Autotest GUI với Scala</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2016-10-30">30 October 2016</time>  on <a href="../tag/test/">test</a>, <a href="../tag/scala/">scala</a>
            </section>
        </header>

        <section class="post-content">
            <p>Scala không phải là một ngôn ngữ mới nhưng vẫn còn khá lạ lẫm với các developer , đặc biệt là việc áp dụng Scala trong viết test. Ngày càng có nhiều dự án sử dụng Scala cho mục đích test GUI, vì vậy bài viết sẽ giới thiệu một sự kết hợp hoàn hảo giữa <strong>Scala, Junit, Specs2 và Selenium</strong> để đạt được điều đó.</p>

<p>Trong quá trình tham gia project tôi luôn tự hỏi vì sao họ lại kết hợp những thứ này với nhau. Với Junit và Selenium thì câu trả lời là tương đối dễ dàng bởi: </p>

<p><strong>Junit</strong>: là một framework unit test cho Java, hỗ trợ cấu hình và chạy các unit test, nó phổ biến đến nỗi khi nhắc đến viết unit test cho Java thì người ta sẽ nhắc ngay đến nó. Scala lại là ngôn ngữ  được biên dịch qua mã Java byte code rồi chạy trên JVM (Java virtual machine) nên 2 ngôn ngữ này có thể kết hợp với nhau hoặc có thể sử dụng các framework, thư viện của nhau. Do vậy việc tận dụng một framework phổ biến, đã được cộng đồng kiếm chứng làm giảm chi phí phát triển dự án</p>

<p><strong>Selenium</strong>: để có thể thực hiện autotest GUI thì cần phải có một tool cho phép
giả lập các thao tác của người dùng với browser như click chuột, nhập text, gõ các phím ... Selenium chính là một tool như vậy, bạn có thể làm những điều này dễ dàng với Selenium trên các trình duyệt khác nhau như firefox, chrome, ie... Cũng giống như Junit nó là một tool phổ biến và hỗ trợ đầy đủ nhất cho mục đích này.</p>

<p><strong>Vậy tại sao lại sử dụng Scala mà không phải là Java?</strong> Khi viết test GUI ngoài việc đảm bảo viết và chạy các test đúng thì điều quan trọng nhất là các test case phải ngắn gọn dễ đọc, dễ bảo trì. Điều này thì Scala hơn hẳn Java, Scala cung cấp các built-in method, sử dụng closure và lamda giống như trong Ruby hay Python, làm cho code viết bằng Scala ngắn gọn, xúc tích và dễ đọc ngay cả với những tester ít có kinh nghiệm lập trình, do nó gần với ngôn ngữ tự nhiên hơn so với Java. Dưới đây là một số ví dụ:</p>

<p>Nếu muốn khai báo một list các số nguyên, sau đó lọc những phần tử chẵn rồi sắp xếp:  </p>

<pre><code class="language-Scala">val nums = List(5, 1, 4, 3, 2)  
nums.filter(_ % 2 == 0).sort(_ &lt; _)  
</code></pre>

<p>Hoặc một thao tác hay gặp khi viết các test là kiểm tra xem liệu một list có được sắp xếp theo chiều giảm dần hay không?</p>

<pre><code class="language-Scala">return list.view.zip(list.tail).forall(x =&gt; x._1 &lt;= x._2)  
</code></pre>

<p>Hay muốn convert một list các String sang list các số Double:  </p>

<pre><code class="language-Scala">def convertStringListToDoubleList(list: Seq[String]) = {  
    list.map({e =&gt; e.toDouble})
}
</code></pre>

<p>Như vậy chỉ cần sử dụng Junit, Selenium và Scala là đã đủ đồ nghề cho chúng ta viết test. Tuy nhiên nếu chỉ có vậy thì các test case viết sẽ chỉ có code scala, nó có thể ngắn gọn và dễ đọc hơn với những người ít nhiều có kinh nghiệm với lập trình, tuy nhiên vấn đề đặt ra bây giờ là làm thế nào để test có thể dễ đọc, dễ hiểu với ngay cả những người không biết code. Tức là các test khi code xong phải gần giống như các test khi được đặc tả, nó phải gần giống như một file text. <a href="https://etorreborre.github.io/specs2/"><strong>Specs2</strong></a> là một thư viện cho phép đặc tả các unit test và acceptance test. Nó cũng cung cấp các <a href="https://etorreborre.github.io/specs2/guide/SPECS2-3.6.2/org.specs2.guide.Matchers.html">matcher</a> giúp việc assert các kết quả mong đợi và kết quả thực tế khi chạy thuận tiện và dễ đọc hơn. Hãy xem xét một test case được viết bằng Specs2 dưới đây:</p>

<pre><code class="language-Scala">class HelloWorldSpec extends Specification { def is = s2"""

  This is a specification for the 'Hello world' string

  The 'Hello world' string should
    contain 11 characters                             $e1
    start with 'Hello'                                $e2
    end with 'world'                                  $e3
                                                      """
  def e1 = "Hello world" must haveSize(11)
  def e2 = "Hello world" must startWith("Hello")
  def e3 = "Hello world" must endWith("world")

}
</code></pre>

<p>Khi chạy file này, method <em>def is=s2</em> sẽ được thực thi, trong method mỗi một dòng code sẽ có 1 dòng comment, các comment trong file trên sẽ là:  <em>contain 11 characters</em>, <em>start with 'Hello'</em> và <em>end with 'world'</em> chúng lần lượt là comment của các method được chạy lần lượt e1, e2 và e3. Lưu ý ký tự đặc biệt <em>$</em> trước các method nhằm giúp phân biệt giữa đâu là comment và đâu là nơi chạy các method. Với một test case được viết như trên những người làm về nghiệp vụ có thể đọc và hiểu được test case này đang làm gì, mà không cần quan tâm nhiều đến code viết bằng Scala. </p>

<p>Trong thực tế các test case phức tạp hơn nhiều, bằng việc ném xử lý phần logic vào các method trong Scala, với cách đặt tên các method này hợp lý, có nghĩa(meaningful). Sau đó các method này sẽ được gọi kết hợp Specs2 sẽ khiến cho test case cực kỳ dễ đọc, dễ hiểu với bất cứ ai. Đó là một trong những điều quan trọng nhất khi viết test. Bởi với những project đòi hỏi thời gian maintain (lên tới 80% chi phí dự án) thì cũng kéo theo việc phải chỉnh sửa các test case liên tục. Specs2 giúp các tester và developer giảm đáng kể thời gian cho việc này</p>

<p>Như vậy với việc sử dụng <strong>Scala, Junit, Specs2 và Selenium</strong> bạn sẽ có thêm một sự lựa chọn tốt cho các dự án cần viết autotest cho GUI. </p>
        </section>

        <footer class="post-footer">



            <section class="author">
                <h4><a href="../author/ngocnv/">ngocnv</a></h4>

                    <p>I'm just a java lover</p>
                <div class="author-meta">
                    
                    
                </div>
            </section>


            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="https://twitter.com/intent/tweet?text=Autotest%20GUI%20v%E1%BB%9Bi%20Scala&amp;url=http://localhost:2368/autotest-scala/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:2368/autotest-scala/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=http://localhost:2368/autotest-scala/" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>


        </footer>

    </article>
</main>

<aside class="read-next">
    <a class="read-next-story prev no-cover" href="../java-concurrency/">
        <section class="post">
            <h2>Java concurrency</h2>
            <p>Java platform cung cấp khả năng xử lý multi-threading ở mức low-level, cho phép các developer viết các chương…</p>
        </section>
    </a>
</aside>



        <footer class="site-footer clearfix">
            <section class="copyright"><a href="../">Learn Java</a> © 2016</section>
            <section class="poweredby">Proudly published with <a href="https://ghost.org">Ghost</a></section>
        </footer>

    </div>

    <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
    
    <script type="text/javascript" src="../assets/js/jquery.fitvids.js?v=572f9728d4"></script>
    <script type="text/javascript" src="../assets/js/index.js?v=572f9728d4"></script>

</body>
